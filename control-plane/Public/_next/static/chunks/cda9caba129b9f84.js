(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,85175,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={assign:function(){return l},searchParamsToUrlQuery:function(){return a},urlQueryToSearchParams:function(){return o}};for(var s in n)Object.defineProperty(r,s,{enumerable:!0,get:n[s]});function a(e){let t={};for(let[r,n]of e.entries()){let e=t[r];void 0===e?t[r]=n:Array.isArray(e)?e.push(n):t[r]=[e,n]}return t}function i(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function o(e){let t=new URLSearchParams;for(let[r,n]of Object.entries(e))if(Array.isArray(n))for(let e of n)t.append(r,i(e));else t.set(r,i(n));return t}function l(e,...t){for(let r of t){for(let t of r.keys())e.delete(t);for(let[t,n]of r.entries())e.append(t,n)}return e}},1110,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={formatUrl:function(){return o},formatWithValidation:function(){return u},urlObjectKeys:function(){return l}};for(var s in n)Object.defineProperty(r,s,{enumerable:!0,get:n[s]});let a=e.r(31901)._(e.r(85175)),i=/https?|ftp|gopher|file/;function o(e){let{auth:t,hostname:r}=e,n=e.protocol||"",s=e.pathname||"",o=e.hash||"",l=e.query||"",u=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?u=t+e.host:r&&(u=t+(~r.indexOf(":")?`[${r}]`:r),e.port&&(u+=":"+e.port)),l&&"object"==typeof l&&(l=String(a.urlQueryToSearchParams(l)));let c=e.search||l&&`?${l}`||"";return n&&!n.endsWith(":")&&(n+=":"),e.slashes||(!n||i.test(n))&&!1!==u?(u="//"+(u||""),s&&"/"!==s[0]&&(s="/"+s)):u||(u=""),o&&"#"!==o[0]&&(o="#"+o),c&&"?"!==c[0]&&(c="?"+c),s=s.replace(/[?#]/g,encodeURIComponent),c=c.replace("#","%23"),`${n}${u}${s}${c}${o}`}let l=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function u(e){return o(e)}},58479,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"useMergedRef",{enumerable:!0,get:function(){return s}});let n=e.r(55316);function s(e,t){let r=(0,n.useRef)(null),s=(0,n.useRef)(null);return(0,n.useCallback)(n=>{if(null===n){let e=r.current;e&&(r.current=null,e());let t=s.current;t&&(s.current=null,t())}else e&&(r.current=a(e,n)),t&&(s.current=a(t,n))},[e,t])}function a(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let r=e(t);return"function"==typeof r?r:()=>e(null)}}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},56588,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={DecodeError:function(){return y},MiddlewareNotFoundError:function(){return N},MissingStaticPage:function(){return x},NormalizeError:function(){return v},PageNotFoundError:function(){return b},SP:function(){return h},ST:function(){return g},WEB_VITALS:function(){return a},execOnce:function(){return i},getDisplayName:function(){return d},getLocationOrigin:function(){return u},getURL:function(){return c},isAbsoluteUrl:function(){return l},isResSent:function(){return p},loadGetInitialProps:function(){return m},normalizeRepeatedSlashes:function(){return f},stringifyError:function(){return j}};for(var s in n)Object.defineProperty(r,s,{enumerable:!0,get:n[s]});let a=["CLS","FCP","FID","INP","LCP","TTFB"];function i(e){let t,r=!1;return(...n)=>(r||(r=!0,t=e(...n)),t)}let o=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,l=e=>o.test(e);function u(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function c(){let{href:e}=window.location,t=u();return e.substring(t.length)}function d(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function p(e){return e.finished||e.headersSent}function f(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function m(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await m(t.Component,t.ctx)}:{};let n=await e.getInitialProps(t);if(r&&p(r))return n;if(!n)throw Object.defineProperty(Error(`"${d(e)}.getInitialProps()" should resolve to an object. But found "${n}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return n}let h="undefined"!=typeof performance,g=h&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class y extends Error{}class v extends Error{}class b extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class x extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class N extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function j(e){return JSON.stringify({message:e.message,stack:e.stack})}},29790,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"isLocalURL",{enumerable:!0,get:function(){return a}});let n=e.r(56588),s=e.r(27050);function a(e){if(!(0,n.isAbsoluteUrl)(e))return!0;try{let t=(0,n.getLocationOrigin)(),r=new URL(e,t);return r.origin===t&&(0,s.hasBasePath)(r.pathname)}catch(e){return!1}}},3354,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"errorOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},81519,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={default:function(){return y},useLinkStatus:function(){return b}};for(var s in n)Object.defineProperty(r,s,{enumerable:!0,get:n[s]});let a=e.r(31901),i=e.r(57324),o=a._(e.r(55316)),l=e.r(1110),u=e.r(39714),c=e.r(58479),d=e.r(56588),p=e.r(53840);e.r(9776);let f=e.r(35605),m=e.r(29790),h=e.r(19467);function g(e){return"string"==typeof e?e:(0,l.formatUrl)(e)}function y(t){var r;let n,s,a,[l,y]=(0,o.useOptimistic)(f.IDLE_LINK_STATUS),b=(0,o.useRef)(null),{href:x,as:N,children:j,prefetch:w=null,passHref:C,replace:S,shallow:R,scroll:k,onClick:M,onMouseEnter:E,onTouchStart:O,legacyBehavior:P=!1,onNavigate:T,ref:I,unstable_dynamicOnHover:A,...$}=t;n=j,P&&("string"==typeof n||"number"==typeof n)&&(n=(0,i.jsx)("a",{children:n}));let D=o.default.useContext(u.AppRouterContext),_=!1!==w,F=!1!==w?null===(r=w)||"auto"===r?h.FetchStrategy.PPR:h.FetchStrategy.Full:h.FetchStrategy.PPR,{href:L,as:U}=o.default.useMemo(()=>{let e=g(x);return{href:e,as:N?g(N):e}},[x,N]);if(P){if(n?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});s=o.default.Children.only(n)}let z=P?s&&"object"==typeof s&&s.ref:I,K=o.default.useCallback(e=>(null!==D&&(b.current=(0,f.mountLinkInstance)(e,L,D,F,_,y)),()=>{b.current&&((0,f.unmountLinkForCurrentNavigation)(b.current),b.current=null),(0,f.unmountPrefetchableInstance)(e)}),[_,L,D,F,y]),B={ref:(0,c.useMergedRef)(K,z),onClick(t){P||"function"!=typeof M||M(t),P&&s.props&&"function"==typeof s.props.onClick&&s.props.onClick(t),!D||t.defaultPrevented||function(t,r,n,s,a,i,l){if("undefined"!=typeof window){let u,{nodeName:c}=t.currentTarget;if("A"===c.toUpperCase()&&((u=t.currentTarget.getAttribute("target"))&&"_self"!==u||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,m.isLocalURL)(r)){a&&(t.preventDefault(),location.replace(r));return}if(t.preventDefault(),l){let e=!1;if(l({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:d}=e.r(2197);o.default.startTransition(()=>{d(n||r,a?"replace":"push",i??!0,s.current)})}}(t,L,U,b,S,k,T)},onMouseEnter(e){P||"function"!=typeof E||E(e),P&&s.props&&"function"==typeof s.props.onMouseEnter&&s.props.onMouseEnter(e),D&&_&&(0,f.onNavigationIntent)(e.currentTarget,!0===A)},onTouchStart:function(e){P||"function"!=typeof O||O(e),P&&s.props&&"function"==typeof s.props.onTouchStart&&s.props.onTouchStart(e),D&&_&&(0,f.onNavigationIntent)(e.currentTarget,!0===A)}};return(0,d.isAbsoluteUrl)(U)?B.href=U:P&&!C&&("a"!==s.type||"href"in s.props)||(B.href=(0,p.addBasePath)(U)),a=P?o.default.cloneElement(s,B):(0,i.jsx)("a",{...$,...B,children:n}),(0,i.jsx)(v.Provider,{value:l,children:a})}e.r(3354);let v=(0,o.createContext)(f.IDLE_LINK_STATUS),b=()=>(0,o.useContext)(v);("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},49400,e=>{"use strict";var t=e.i(99797);e.s(["vmsApi",0,{list:()=>t.api.get("/api/vms"),get:e=>t.api.get(`/api/vms/${e}`),create:e=>t.api.post("/api/vms",e),update:(e,r)=>t.api.put(`/api/vms/${e}`,r),delete:e=>t.api.delete(`/api/vms/${e}`),start:e=>t.api.post(`/api/vms/${e}/start`),stop:e=>t.api.post(`/api/vms/${e}/stop`),restart:e=>t.api.post(`/api/vms/${e}/restart`),pause:e=>t.api.post(`/api/vms/${e}/pause`),resume:e=>t.api.post(`/api/vms/${e}/resume`),getStatus:e=>t.api.get(`/api/vms/${e}/status`)}])},72572,e=>{"use strict";var t=e.i(99797);e.s(["agentsApi",0,{list:()=>t.api.get("/api/agents"),get:e=>t.api.get(`/api/agents/${e}`),deregister:e=>t.api.delete(`/api/agents/${e}`),forceOffline:e=>t.api.post(`/api/agents/${e}/actions/force-offline`),listTokens:()=>t.api.get("/api/agents/registration-tokens"),createToken:e=>t.api.post("/api/agents/registration-tokens",e),revokeToken:e=>t.api.delete(`/api/agents/registration-tokens/${e}`)}])},58838,e=>{"use strict";var t=e.i(8398),r=e.i(52012),n=e.i(49400);function s(){return(0,t.useQuery)({queryKey:["vms"],queryFn:n.vmsApi.list,refetchInterval:5e3})}function a(e){return(0,t.useQuery)({queryKey:["vms",e],queryFn:()=>n.vmsApi.get(e),enabled:!!e})}function i(){let e=(0,r.useQueryClient)();return()=>e.invalidateQueries({queryKey:["vms"]})}e.s(["useInvalidateVMs",()=>i,"useVM",()=>a,"useVMs",()=>s])},24931,79579,3477,e=>{"use strict";e.i(58838);var t=e.i(8398),r=e.i(52012),n=e.i(72572);function s(){return(0,t.useQuery)({queryKey:["agents"],queryFn:n.agentsApi.list,refetchInterval:1e4})}function a(){let e=(0,r.useQueryClient)();return()=>{e.invalidateQueries({queryKey:["agents"]}),e.invalidateQueries({queryKey:["agent-tokens"]})}}e.s(["useAgents",()=>s,"useInvalidateAgents",()=>a],79579),e.i(91574),e.i(43737);var i=e.i(55316);function o({vmId:e,onConnected:t,onDisconnected:r,onError:n}){let s=(0,i.useRef)(null),a=(0,i.useRef)(null),o=(0,i.useRef)(!1),[l,u]=(0,i.useState)(!1),[c,d]=(0,i.useState)(!1),[p,f]=(0,i.useState)(null),m=(0,i.useCallback)(i=>{if(s.current?.readyState===WebSocket.OPEN)return;a.current=i,o.current=!1,d(!0),f(null);let l="https:"===window.location.protocol?"wss:":"ws:",c=new WebSocket(`${l}//${window.location.host}/api/vms/${e}/console`);c.binaryType="arraybuffer",c.onopen=()=>{i.write("\r\n\x1b[33mWaiting for console...\x1b[0m")},c.onmessage=e=>{if(e.data instanceof ArrayBuffer){let t=new TextDecoder().decode(e.data);i.write(t)}else"string"==typeof e.data&&("ready"===e.data?(o.current=!0,d(!1),u(!0),i.write("\r\n\x1b[32mConnected to VM console\x1b[0m\r\n\r\n"),t?.()):e.data.startsWith("error:")?i.write(`\r
\x1b[31m${e.data}\x1b[0m\r
`):i.write(e.data))},c.onclose=e=>{o.current=!1,u(!1),d(!1),i.write("\r\n\x1b[33mDisconnected from VM console\x1b[0m\r\n"),r?.(e.reason||void 0)},c.onerror=()=>{let e=Error("WebSocket connection failed");o.current=!1,f(e),d(!1),i.write("\r\n\x1b[31mFailed to connect to VM console\x1b[0m\r\n"),n?.(e)},s.current=c;let p=i.onData(e=>{if(o.current&&c.readyState===WebSocket.OPEN){let t=new TextEncoder;c.send(t.encode(e))}});c._termDisposable=p},[e,t,r,n]),h=(0,i.useCallback)(()=>{if(s.current){let e=s.current;e._termDisposable?.dispose(),o.current=!1,s.current.close(),s.current=null}},[]);return(0,i.useEffect)(()=>()=>{if(s.current){let e=s.current;e._termDisposable?.dispose(),s.current.close()}},[]),{connect:m,disconnect:h,isConnected:l,isConnecting:c,error:p}}e.s(["useConsole",()=>o],3477),e.s([],24931)},28437,47643,e=>{"use strict";function t(e,r,{checkForDefaultPrevented:n=!0}={}){return function(t){if(e?.(t),!1===n||!t.defaultPrevented)return r?.(t)}}"undefined"!=typeof window&&window.document&&window.document.createElement,e.s(["composeEventHandlers",()=>t],28437);var r=e.i(55316),n=globalThis?.document?r.useLayoutEffect:()=>{};e.s(["useLayoutEffect",()=>n],47643)},26456,e=>{"use strict";var t=e.i(55316),r=e.i(47643);t[" useEffectEvent ".trim().toString()],t[" useInsertionEffect ".trim().toString()];var n=t[" useInsertionEffect ".trim().toString()]||r.useLayoutEffect;function s({prop:e,defaultProp:r,onChange:s=()=>{},caller:a}){let[i,o,l]=function({defaultProp:e,onChange:r}){let[s,a]=t.useState(e),i=t.useRef(s),o=t.useRef(r);return n(()=>{o.current=r},[r]),t.useEffect(()=>{i.current!==s&&(o.current?.(s),i.current=s)},[s,i]),[s,a,o]}({defaultProp:r,onChange:s}),u=void 0!==e,c=u?e:i;{let r=t.useRef(void 0!==e);t.useEffect(()=>{let e=r.current;if(e!==u){let t=u?"controlled":"uncontrolled";console.warn(`${a} is changing from ${e?"controlled":"uncontrolled"} to ${t}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`)}r.current=u},[u,a])}return[c,t.useCallback(t=>{if(u){let r="function"==typeof t?t(e):t;r!==e&&l.current?.(r)}else o(t)},[u,e,o,l])]}Symbol("RADIX:SYNC_STATE"),e.s(["useControllableState",()=>s],26456)},32846,e=>{"use strict";var t=e.i(55316);function r(e){let r=t.useRef(e);return t.useEffect(()=>{r.current=e}),t.useMemo(()=>(...e)=>r.current?.(...e),[])}e.s(["useCallbackRef",()=>r])},48852,e=>{"use strict";var t=e.i(55316),r=e.i(47643),n=t[" useId ".trim().toString()]||(()=>void 0),s=0;function a(e){let[a,i]=t.useState(n());return(0,r.useLayoutEffect)(()=>{e||i(e=>e??String(s++))},[e]),e||(a?`radix-${a}`:"")}e.s(["useId",()=>a])},16450,e=>{"use strict";var t=e.i(55316),r=e.i(52240),n=e.i(47643),s=e=>{var s;let i,o,{present:l,children:u}=e,c=function(e){var r,s;let[i,o]=t.useState(),l=t.useRef(null),u=t.useRef(e),c=t.useRef("none"),[d,p]=(r=e?"mounted":"unmounted",s={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},t.useReducer((e,t)=>s[e][t]??e,r));return t.useEffect(()=>{let e=a(l.current);c.current="mounted"===d?e:"none"},[d]),(0,n.useLayoutEffect)(()=>{let t=l.current,r=u.current;if(r!==e){let n=c.current,s=a(t);e?p("MOUNT"):"none"===s||t?.display==="none"?p("UNMOUNT"):r&&n!==s?p("ANIMATION_OUT"):p("UNMOUNT"),u.current=e}},[e,p]),(0,n.useLayoutEffect)(()=>{if(i){let e,t=i.ownerDocument.defaultView??window,r=r=>{let n=a(l.current).includes(CSS.escape(r.animationName));if(r.target===i&&n&&(p("ANIMATION_END"),!u.current)){let r=i.style.animationFillMode;i.style.animationFillMode="forwards",e=t.setTimeout(()=>{"forwards"===i.style.animationFillMode&&(i.style.animationFillMode=r)})}},n=e=>{e.target===i&&(c.current=a(l.current))};return i.addEventListener("animationstart",n),i.addEventListener("animationcancel",r),i.addEventListener("animationend",r),()=>{t.clearTimeout(e),i.removeEventListener("animationstart",n),i.removeEventListener("animationcancel",r),i.removeEventListener("animationend",r)}}p("ANIMATION_END")},[i,p]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:t.useCallback(e=>{l.current=e?getComputedStyle(e):null,o(e)},[])}}(l),d="function"==typeof u?u({present:c.isPresent}):t.Children.only(u),p=(0,r.useComposedRefs)(c.ref,(s=d,(o=(i=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in i&&i.isReactWarning)?s.ref:(o=(i=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in i&&i.isReactWarning)?s.props.ref:s.props.ref||s.ref));return"function"==typeof u||c.isPresent?t.cloneElement(d,{ref:p}):null};function a(e){return e?.animationName||"none"}s.displayName="Presence",e.s(["Presence",()=>s])},63248,e=>{"use strict";var t=e.i(57324),r=e.i(78160);function n({className:e,...n}){return(0,t.jsx)("div",{"data-slot":"skeleton",className:(0,r.cn)("bg-accent animate-pulse rounded-md",e),...n})}e.s(["Skeleton",()=>n])},91574,42929,43737,e=>{"use strict";var t=e.i(8398),r=e.i(55316),n=e.i(72393),s=e.i(49415),a=e.i(20266),i=e.i(43001),o=class extends a.Subscribable{#e;#t=void 0;#r;#n;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,i.shallowEqualObjects)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,i.hashKey)(t.mutationKey)!==(0,i.hashKey)(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#s(),this.#a(e)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#s(),this.#a()}mutate(e,t){return this.#n=t,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(e)}#s(){let e=this.#r?.state??(0,n.getDefaultState)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#a(e){s.notifyManager.batch(()=>{if(this.#n&&this.hasListeners()){let t=this.#t.variables,r=this.#t.context,n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(e?.type==="success"){try{this.#n.onSuccess?.(e.data,t,r,n)}catch(e){Promise.reject(e)}try{this.#n.onSettled?.(e.data,null,t,r,n)}catch(e){Promise.reject(e)}}else if(e?.type==="error"){try{this.#n.onError?.(e.error,t,r,n)}catch(e){Promise.reject(e)}try{this.#n.onSettled?.(void 0,e.error,t,r,n)}catch(e){Promise.reject(e)}}}this.listeners.forEach(e=>{e(this.#t)})})}},l=e.i(52012);function u(e,t){let n=(0,l.useQueryClient)(t),[a]=r.useState(()=>new o(n,e));r.useEffect(()=>{a.setOptions(e)},[a,e]);let u=r.useSyncExternalStore(r.useCallback(e=>a.subscribe(s.notifyManager.batchCalls(e)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),c=r.useCallback((e,t)=>{a.mutate(e,t).catch(i.noop)},[a]);if(u.error&&(0,i.shouldThrowError)(a.options.throwOnError,[u.error]))throw u.error;return{...u,mutate:c,mutateAsync:u.mutate}}var c=e.i(99797);let d={list:e=>c.api.get(`/api/projects/${e}/images`),get:(e,t)=>c.api.get(`/api/projects/${e}/images/${t}`),createFromURL:(e,t)=>c.api.post(`/api/projects/${e}/images`,t),async upload(e,t,r,n){let s=new FormData;return s.append("file",t),s.append("name",r.name),r.description&&s.append("description",r.description),r.defaultCpu&&s.append("defaultCpu",r.defaultCpu.toString()),r.defaultMemory&&s.append("defaultMemory",r.defaultMemory.toString()),r.defaultDisk&&s.append("defaultDisk",r.defaultDisk.toString()),r.defaultCmdline&&s.append("defaultCmdline",r.defaultCmdline),new Promise((t,r)=>{let a=new XMLHttpRequest;a.open("POST",`/api/projects/${e}/images`),a.withCredentials=!0,a.upload.onprogress=e=>{e.lengthComputable&&n&&n(Math.round(e.loaded/e.total*100))},a.onload=()=>{if(a.status>=200&&a.status<300)try{let e=JSON.parse(a.responseText);t(e)}catch{r(Error("Invalid response format"))}else try{let e=JSON.parse(a.responseText);r(Error(e.reason||e.message||"Upload failed"))}catch{r(Error(`Upload failed with status ${a.status}`))}},a.onerror=()=>{r(Error("Network error during upload"))},a.send(s)})},update:(e,t,r)=>c.api.put(`/api/projects/${e}/images/${t}`,r),delete:(e,t)=>c.api.delete(`/api/projects/${e}/images/${t}`),getStatus:(e,t)=>c.api.get(`/api/projects/${e}/images/${t}/status`),getDownloadURL:(e,t)=>`/api/projects/${e}/images/${t}/download`};function p(e){return(0,t.useQuery)({queryKey:["images",e],queryFn:()=>e?d.list(e):Promise.resolve([]),enabled:!!e,refetchInterval:5e3})}function f(e){let t=(0,l.useQueryClient)();return u({mutationFn:t=>d.createFromURL(e,t),onSuccess:()=>{t.invalidateQueries({queryKey:["images",e]})}})}function m(e){let t=(0,l.useQueryClient)();return u({mutationFn:({file:t,metadata:r,onProgress:n})=>d.upload(e,t,r,n),onSuccess:()=>{t.invalidateQueries({queryKey:["images",e]})}})}function h(e){let t=(0,l.useQueryClient)();return u({mutationFn:t=>d.delete(e,t),onSuccess:()=>{t.invalidateQueries({queryKey:["images",e]})}})}function g(e){let t=(0,l.useQueryClient)();return()=>t.invalidateQueries({queryKey:["images",e]})}e.s(["imagesApi",0,d],42929),e.s(["useCreateImageFromURL",()=>f,"useDeleteImage",()=>h,"useImages",()=>p,"useInvalidateImages",()=>g,"useUploadImage",()=>m],91574);function y(e){return(0,t.useQuery)({queryKey:["projects","organization",e],queryFn:()=>{let t;return e?(t=e,c.api.get(`/api/organizations/${t}/projects`)):Promise.resolve([])},enabled:!!e})}e.s(["useProjectsForOrganization",()=>y],43737)},80696,e=>{"use strict";var t=e.i(55316),r=e.i(57324),n=e.i(52240);function s(e){var s;let a,o=(s=e,(a=t.forwardRef((e,r)=>{let{children:s,...a}=e;if(t.isValidElement(s)){var i;let e,o,l=(i=s,(o=(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.ref:(o=(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.props.ref:i.props.ref||i.ref),u=function(e,t){let r={...t};for(let n in t){let s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...e)=>{let t=a(...e);return s(...e),t}:s&&(r[n]=s):"style"===n?r[n]={...s,...a}:"className"===n&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}(a,s.props);return s.type!==t.Fragment&&(u.ref=r?(0,n.composeRefs)(r,l):l),t.cloneElement(s,u)}return t.Children.count(s)>1?t.Children.only(null):null})).displayName=`${s}.SlotClone`,a),l=t.forwardRef((e,n)=>{let{children:s,...a}=e,l=t.Children.toArray(s),u=l.find(i);if(u){let e=u.props.children,s=l.map(r=>r!==u?r:t.Children.count(e)>1?t.Children.only(null):t.isValidElement(e)?e.props.children:null);return(0,r.jsx)(o,{...a,ref:n,children:t.isValidElement(e)?t.cloneElement(e,void 0,s):null})}return(0,r.jsx)(o,{...a,ref:n,children:s})});return l.displayName=`${e}.Slot`,l}var a=Symbol("radix.slottable");function i(e){return t.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===a}function o(e){let a=e+"CollectionProvider",[i,o]=function(e,n=[]){let s=[],a=()=>{let r=s.map(e=>t.createContext(e));return function(n){let s=n?.[e]||r;return t.useMemo(()=>({[`__scope${e}`]:{...n,[e]:s}}),[n,s])}};return a.scopeName=e,[function(n,a){let i=t.createContext(a),o=s.length;s=[...s,a];let l=n=>{let{scope:s,children:a,...l}=n,u=s?.[e]?.[o]||i,c=t.useMemo(()=>l,Object.values(l));return(0,r.jsx)(u.Provider,{value:c,children:a})};return l.displayName=n+"Provider",[l,function(r,s){let l=s?.[e]?.[o]||i,u=t.useContext(l);if(u)return u;if(void 0!==a)return a;throw Error(`\`${r}\` must be used within \`${n}\``)}]},function(...e){let r=e[0];if(1===e.length)return r;let n=()=>{let n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let s=n.reduce((t,{useScope:r,scopeName:n})=>{let s=r(e)[`__scope${n}`];return{...t,...s}},{});return t.useMemo(()=>({[`__scope${r.scopeName}`]:s}),[s])}};return n.scopeName=r.scopeName,n}(a,...n)]}(a),[l,u]=i(a,{collectionRef:{current:null},itemMap:new Map}),c=e=>{let{scope:n,children:s}=e,a=t.default.useRef(null),i=t.default.useRef(new Map).current;return(0,r.jsx)(l,{scope:n,itemMap:i,collectionRef:a,children:s})};c.displayName=a;let d=e+"CollectionSlot",p=s(d),f=t.default.forwardRef((e,t)=>{let{scope:s,children:a}=e,i=u(d,s),o=(0,n.useComposedRefs)(t,i.collectionRef);return(0,r.jsx)(p,{ref:o,children:a})});f.displayName=d;let m=e+"CollectionItemSlot",h="data-radix-collection-item",g=s(m),y=t.default.forwardRef((e,s)=>{let{scope:a,children:i,...o}=e,l=t.default.useRef(null),c=(0,n.useComposedRefs)(s,l),d=u(m,a);return t.default.useEffect(()=>(d.itemMap.set(l,{ref:l,...o}),()=>void d.itemMap.delete(l))),(0,r.jsx)(g,{...{[h]:""},ref:c,children:i})});return y.displayName=m,[{Provider:c,Slot:f,ItemSlot:y},function(r){let n=u(e+"CollectionConsumer",r);return t.default.useCallback(()=>{let e=n.collectionRef.current;if(!e)return[];let t=Array.from(e.querySelectorAll(`[${h}]`));return Array.from(n.itemMap.values()).sort((e,r)=>t.indexOf(e.ref.current)-t.indexOf(r.ref.current))},[n.collectionRef,n.itemMap])},o]}var l=new WeakMap;function u(e,t){var r,n;let s,a,i;if("at"in Array.prototype)return Array.prototype.at.call(e,t);let o=(r=e,n=t,s=r.length,(i=(a=c(n))>=0?a:s+a)<0||i>=s?-1:i);return -1===o?void 0:e[o]}function c(e){return e!=e||0===e?0:Math.trunc(e)}(class e extends Map{#i;constructor(e){super(e),this.#i=[...super.keys()],l.set(this,!0)}set(e,t){return l.get(this)&&(this.has(e)?this.#i[this.#i.indexOf(e)]=e:this.#i.push(e)),super.set(e,t),this}insert(e,t,r){let n,s=this.has(t),a=this.#i.length,i=c(e),o=i>=0?i:a+i,l=o<0||o>=a?-1:o;if(l===this.size||s&&l===this.size-1||-1===l)return this.set(t,r),this;let u=this.size+ +!s;i<0&&o++;let d=[...this.#i],p=!1;for(let e=o;e<u;e++)if(o===e){let a=d[e];d[e]===t&&(a=d[e+1]),s&&this.delete(t),n=this.get(a),this.set(t,r)}else{p||d[e-1]!==t||(p=!0);let r=d[p?e:e-1],s=n;n=this.get(r),this.delete(r),this.set(r,s)}return this}with(t,r,n){let s=new e(this);return s.insert(t,r,n),s}before(e){let t=this.#i.indexOf(e)-1;if(!(t<0))return this.entryAt(t)}setBefore(e,t,r){let n=this.#i.indexOf(e);return -1===n?this:this.insert(n,t,r)}after(e){let t=this.#i.indexOf(e);if(-1!==(t=-1===t||t===this.size-1?-1:t+1))return this.entryAt(t)}setAfter(e,t,r){let n=this.#i.indexOf(e);return -1===n?this:this.insert(n+1,t,r)}first(){return this.entryAt(0)}last(){return this.entryAt(-1)}clear(){return this.#i=[],super.clear()}delete(e){let t=super.delete(e);return t&&this.#i.splice(this.#i.indexOf(e),1),t}deleteAt(e){let t=this.keyAt(e);return void 0!==t&&this.delete(t)}at(e){let t=u(this.#i,e);if(void 0!==t)return this.get(t)}entryAt(e){let t=u(this.#i,e);if(void 0!==t)return[t,this.get(t)]}indexOf(e){return this.#i.indexOf(e)}keyAt(e){return u(this.#i,e)}from(e,t){let r=this.indexOf(e);if(-1===r)return;let n=r+t;return n<0&&(n=0),n>=this.size&&(n=this.size-1),this.at(n)}keyFrom(e,t){let r=this.indexOf(e);if(-1===r)return;let n=r+t;return n<0&&(n=0),n>=this.size&&(n=this.size-1),this.keyAt(n)}find(e,t){let r=0;for(let n of this){if(Reflect.apply(e,t,[n,r,this]))return n;r++}}findIndex(e,t){let r=0;for(let n of this){if(Reflect.apply(e,t,[n,r,this]))return r;r++}return -1}filter(t,r){let n=[],s=0;for(let e of this)Reflect.apply(t,r,[e,s,this])&&n.push(e),s++;return new e(n)}map(t,r){let n=[],s=0;for(let e of this)n.push([e[0],Reflect.apply(t,r,[e,s,this])]),s++;return new e(n)}reduce(...e){let[t,r]=e,n=0,s=r??this.at(0);for(let r of this)s=0===n&&1===e.length?r:Reflect.apply(t,this,[s,r,n,this]),n++;return s}reduceRight(...e){let[t,r]=e,n=r??this.at(-1);for(let r=this.size-1;r>=0;r--){let s=this.at(r);n=r===this.size-1&&1===e.length?s:Reflect.apply(t,this,[n,s,r,this])}return n}toSorted(t){return new e([...this.entries()].sort(t))}toReversed(){let t=new e;for(let e=this.size-1;e>=0;e--){let r=this.keyAt(e),n=this.get(r);t.set(r,n)}return t}toSpliced(...t){let r=[...this.entries()];return r.splice(...t),new e(r)}slice(t,r){let n=new e,s=this.size-1;if(void 0===t)return n;t<0&&(t+=this.size),void 0!==r&&r>0&&(s=r-1);for(let e=t;e<=s;e++){let t=this.keyAt(e),r=this.get(t);n.set(t,r)}return n}every(e,t){let r=0;for(let n of this){if(!Reflect.apply(e,t,[n,r,this]))return!1;r++}return!0}some(e,t){let r=0;for(let n of this){if(Reflect.apply(e,t,[n,r,this]))return!0;r++}return!1}}),e.s(["createCollection",()=>o],80696)},26404,e=>{"use strict";var t=e.i(55316);e.i(57324);var r=t.createContext(void 0);function n(e){let n=t.useContext(r);return e||n||"ltr"}e.s(["useDirection",()=>n])},71139,87519,e=>{"use strict";var t=e.i(55316),r=e.i(57324);function n(e,s=[]){let a=[],i=()=>{let r=a.map(e=>t.createContext(e));return function(n){let s=n?.[e]||r;return t.useMemo(()=>({[`__scope${e}`]:{...n,[e]:s}}),[n,s])}};return i.scopeName=e,[function(n,s){let i=t.createContext(s),o=a.length;a=[...a,s];let l=n=>{let{scope:s,children:a,...l}=n,u=s?.[e]?.[o]||i,c=t.useMemo(()=>l,Object.values(l));return(0,r.jsx)(u.Provider,{value:c,children:a})};return l.displayName=n+"Provider",[l,function(r,a){let l=a?.[e]?.[o]||i,u=t.useContext(l);if(u)return u;if(void 0!==s)return s;throw Error(`\`${r}\` must be used within \`${n}\``)}]},function(...e){let r=e[0];if(1===e.length)return r;let n=()=>{let n=e.map(e=>({useScope:e(),scopeName:e.scopeName}));return function(e){let s=n.reduce((t,{useScope:r,scopeName:n})=>{let s=r(e)[`__scope${n}`];return{...t,...s}},{});return t.useMemo(()=>({[`__scope${r.scopeName}`]:s}),[s])}};return n.scopeName=r.scopeName,n}(i,...s)]}e.s(["createContextScope",()=>n],71139),e.i(61596);var s=e.i(52240),a=Symbol("radix.slottable");function i(e){return t.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===a}var o=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,n)=>{var a,o;let l,u,c,d=(o=a=`Primitive.${n}`,(l=t.forwardRef((e,r)=>{let{children:n,...a}=e;if(t.isValidElement(n)){var i;let e,o,l=(i=n,(o=(e=Object.getOwnPropertyDescriptor(i.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.ref:(o=(e=Object.getOwnPropertyDescriptor(i,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?i.props.ref:i.props.ref||i.ref),u=function(e,t){let r={...t};for(let n in t){let s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...e)=>{let t=a(...e);return s(...e),t}:s&&(r[n]=s):"style"===n?r[n]={...s,...a}:"className"===n&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}(a,n.props);return n.type!==t.Fragment&&(u.ref=r?(0,s.composeRefs)(r,l):l),t.cloneElement(n,u)}return t.Children.count(n)>1?t.Children.only(null):null})).displayName=`${o}.SlotClone`,u=l,(c=t.forwardRef((e,n)=>{let{children:s,...a}=e,o=t.Children.toArray(s),l=o.find(i);if(l){let e=l.props.children,s=o.map(r=>r!==l?r:t.Children.count(e)>1?t.Children.only(null):t.isValidElement(e)?e.props.children:null);return(0,r.jsx)(u,{...a,ref:n,children:t.isValidElement(e)?t.cloneElement(e,void 0,s):null})}return(0,r.jsx)(u,{...a,ref:n,children:s})})).displayName=`${a}.Slot`,c),p=t.forwardRef((e,t)=>{let{asChild:s,...a}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,r.jsx)(s?d:n,{...a,ref:t})});return p.displayName=`Primitive.${n}`,{...e,[n]:p}},{});e.s(["Primitive",()=>o],87519)},90212,e=>{"use strict";var t=e.i(55316),r=e.i(28437),n=e.i(80696),s=e.i(52240),a=e.i(71139),i=e.i(48852),o=e.i(87519),l=e.i(32846),u=e.i(26456),c=e.i(26404),d=e.i(57324),p="rovingFocusGroup.onEntryFocus",f={bubbles:!1,cancelable:!0},m="RovingFocusGroup",[h,g,y]=(0,n.createCollection)(m),[v,b]=(0,a.createContextScope)(m,[y]),[x,N]=v(m),j=t.forwardRef((e,t)=>(0,d.jsx)(h.Provider,{scope:e.__scopeRovingFocusGroup,children:(0,d.jsx)(h.Slot,{scope:e.__scopeRovingFocusGroup,children:(0,d.jsx)(w,{...e,ref:t})})}));j.displayName=m;var w=t.forwardRef((e,n)=>{let{__scopeRovingFocusGroup:a,orientation:i,loop:h=!1,dir:y,currentTabStopId:v,defaultCurrentTabStopId:b,onCurrentTabStopIdChange:N,onEntryFocus:j,preventScrollOnEntryFocus:w=!1,...C}=e,S=t.useRef(null),R=(0,s.useComposedRefs)(n,S),M=(0,c.useDirection)(y),[E,O]=(0,u.useControllableState)({prop:v,defaultProp:b??null,onChange:N,caller:m}),[P,T]=t.useState(!1),I=(0,l.useCallbackRef)(j),A=g(a),$=t.useRef(!1),[D,_]=t.useState(0);return t.useEffect(()=>{let e=S.current;if(e)return e.addEventListener(p,I),()=>e.removeEventListener(p,I)},[I]),(0,d.jsx)(x,{scope:a,orientation:i,dir:M,loop:h,currentTabStopId:E,onItemFocus:t.useCallback(e=>O(e),[O]),onItemShiftTab:t.useCallback(()=>T(!0),[]),onFocusableItemAdd:t.useCallback(()=>_(e=>e+1),[]),onFocusableItemRemove:t.useCallback(()=>_(e=>e-1),[]),children:(0,d.jsx)(o.Primitive.div,{tabIndex:P||0===D?-1:0,"data-orientation":i,...C,ref:R,style:{outline:"none",...e.style},onMouseDown:(0,r.composeEventHandlers)(e.onMouseDown,()=>{$.current=!0}),onFocus:(0,r.composeEventHandlers)(e.onFocus,e=>{let t=!$.current;if(e.target===e.currentTarget&&t&&!P){let t=new CustomEvent(p,f);if(e.currentTarget.dispatchEvent(t),!t.defaultPrevented){let e=A().filter(e=>e.focusable);k([e.find(e=>e.active),e.find(e=>e.id===E),...e].filter(Boolean).map(e=>e.ref.current),w)}}$.current=!1}),onBlur:(0,r.composeEventHandlers)(e.onBlur,()=>T(!1))})})}),C="RovingFocusGroupItem",S=t.forwardRef((e,n)=>{let{__scopeRovingFocusGroup:s,focusable:a=!0,active:l=!1,tabStopId:u,children:c,...p}=e,f=(0,i.useId)(),m=u||f,y=N(C,s),v=y.currentTabStopId===m,b=g(s),{onFocusableItemAdd:x,onFocusableItemRemove:j,currentTabStopId:w}=y;return t.useEffect(()=>{if(a)return x(),()=>j()},[a,x,j]),(0,d.jsx)(h.ItemSlot,{scope:s,id:m,focusable:a,active:l,children:(0,d.jsx)(o.Primitive.span,{tabIndex:v?0:-1,"data-orientation":y.orientation,...p,ref:n,onMouseDown:(0,r.composeEventHandlers)(e.onMouseDown,e=>{a?y.onItemFocus(m):e.preventDefault()}),onFocus:(0,r.composeEventHandlers)(e.onFocus,()=>y.onItemFocus(m)),onKeyDown:(0,r.composeEventHandlers)(e.onKeyDown,e=>{if("Tab"===e.key&&e.shiftKey)return void y.onItemShiftTab();if(e.target!==e.currentTarget)return;let t=function(e,t,r){var n;let s=(n=e.key,"rtl"!==r?n:"ArrowLeft"===n?"ArrowRight":"ArrowRight"===n?"ArrowLeft":n);if(!("vertical"===t&&["ArrowLeft","ArrowRight"].includes(s))&&!("horizontal"===t&&["ArrowUp","ArrowDown"].includes(s)))return R[s]}(e,y.orientation,y.dir);if(void 0!==t){if(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return;e.preventDefault();let s=b().filter(e=>e.focusable).map(e=>e.ref.current);if("last"===t)s.reverse();else if("prev"===t||"next"===t){var r,n;"prev"===t&&s.reverse();let a=s.indexOf(e.currentTarget);s=y.loop?(r=s,n=a+1,r.map((e,t)=>r[(n+t)%r.length])):s.slice(a+1)}setTimeout(()=>k(s))}}),children:"function"==typeof c?c({isCurrentTabStop:v,hasTabStop:null!=w}):c})})});S.displayName=C;var R={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function k(e,t=!1){let r=document.activeElement;for(let n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}e.s(["Item",()=>S,"Root",()=>j,"createRovingFocusGroupScope",()=>b])},18625,33975,19343,47473,91549,e=>{"use strict";var t=e.i(57324),r=e.i(81519),n=e.i(78448),s=e.i(63248),a=e.i(86135);let i={Running:{label:"Running",className:"bg-green-500/20 text-green-400 border-green-500/30"},Shutdown:{label:"Stopped",className:"bg-red-500/20 text-red-400 border-red-500/30"},Paused:{label:"Paused",className:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30"},Created:{label:"Created",className:"bg-blue-500/20 text-blue-400 border-blue-500/30"}};function o({status:e}){let r=i[e]||i.Created;return(0,t.jsx)(a.Badge,{variant:"outline",className:r.className,children:r.label})}e.s(["VMStatusBadge",()=>o],33975);var l=e.i(55316),u=e.i(22337);let c=(0,u.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),d=(0,u.default)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),p=(0,u.default)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),f=(0,u.default)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]);var m=e.i(407),h=e.i(65214),g=e.i(2175),y=e.i(47555),v=e.i(9202),b=e.i(49400),x=e.i(33642);function N({vm:e,onActionComplete:r}){let[n,s]=(0,l.useState)(!1),[a,i]=(0,l.useState)(null),o=async t=>{s(!0),i(t);try{switch(t){case"start":await b.vmsApi.start(e.id),x.toast.success(`Starting ${e.name}`);break;case"stop":await b.vmsApi.stop(e.id),x.toast.success(`Stopping ${e.name}`);break;case"restart":await b.vmsApi.restart(e.id),x.toast.success(`Restarting ${e.name}`);break;case"pause":await b.vmsApi.pause(e.id),x.toast.success(`Pausing ${e.name}`);break;case"resume":await b.vmsApi.resume(e.id),x.toast.success(`Resuming ${e.name}`);break;case"delete":await b.vmsApi.delete(e.id),x.toast.success(`Deleted ${e.name}`)}r?.()}catch(e){x.toast.error(e instanceof Error?e.message:`Failed to ${t} VM`)}finally{s(!1),i(null)}},u="Shutdown"===e.status||"Created"===e.status,N="Running"===e.status||"Paused"===e.status,j="Running"===e.status,w="Paused"===e.status;return(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[u&&(0,t.jsx)(y.Button,{size:"sm",variant:"ghost",className:"text-green-400 hover:text-green-300 hover:bg-green-500/10",onClick:()=>o("start"),disabled:n,children:"start"===a?(0,t.jsx)(g.Loader2,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(c,{className:"h-4 w-4"})}),N&&(0,t.jsx)(y.Button,{size:"sm",variant:"ghost",className:"text-red-400 hover:text-red-300 hover:bg-red-500/10",onClick:()=>o("stop"),disabled:n,children:"stop"===a?(0,t.jsx)(g.Loader2,{className:"h-4 w-4 animate-spin"}):(0,t.jsx)(d,{className:"h-4 w-4"})}),(0,t.jsxs)(v.DropdownMenu,{children:[(0,t.jsx)(v.DropdownMenuTrigger,{asChild:!0,children:(0,t.jsx)(y.Button,{size:"sm",variant:"ghost",className:"text-gray-400 hover:text-gray-200",disabled:n,children:(0,t.jsx)(h.MoreHorizontal,{className:"h-4 w-4"})})}),(0,t.jsxs)(v.DropdownMenuContent,{className:"bg-gray-800 border-gray-700",children:[u&&(0,t.jsxs)(v.DropdownMenuItem,{onClick:()=>o("start"),className:"text-gray-200 hover:bg-gray-700 cursor-pointer",children:[(0,t.jsx)(c,{className:"h-4 w-4 mr-2 text-green-400"}),"Start"]}),N&&(0,t.jsxs)(v.DropdownMenuItem,{onClick:()=>o("stop"),className:"text-gray-200 hover:bg-gray-700 cursor-pointer",children:[(0,t.jsx)(d,{className:"h-4 w-4 mr-2 text-red-400"}),"Stop"]}),(0,t.jsxs)(v.DropdownMenuItem,{onClick:()=>o("restart"),className:"text-gray-200 hover:bg-gray-700 cursor-pointer",disabled:"Running"!==e.status,children:[(0,t.jsx)(p,{className:"h-4 w-4 mr-2 text-blue-400"}),"Restart"]}),j&&(0,t.jsxs)(v.DropdownMenuItem,{onClick:()=>o("pause"),className:"text-gray-200 hover:bg-gray-700 cursor-pointer",children:[(0,t.jsx)(f,{className:"h-4 w-4 mr-2 text-yellow-400"}),"Pause"]}),w&&(0,t.jsxs)(v.DropdownMenuItem,{onClick:()=>o("resume"),className:"text-gray-200 hover:bg-gray-700 cursor-pointer",children:[(0,t.jsx)(c,{className:"h-4 w-4 mr-2 text-green-400"}),"Resume"]}),(0,t.jsx)(v.DropdownMenuSeparator,{className:"bg-gray-700"}),(0,t.jsxs)(v.DropdownMenuItem,{onClick:()=>o("delete"),className:"text-red-400 hover:bg-red-500/10 cursor-pointer",children:[(0,t.jsx)(m.Trash2,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})}function j({vms:e,isLoading:a,onRefresh:i}){return a?(0,t.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0].map((e,r)=>(0,t.jsx)(s.Skeleton,{className:"h-12 w-full bg-gray-700"},r))}):0===e.length?(0,t.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No virtual machines found. Create one to get started."}):(0,t.jsxs)(n.Table,{children:[(0,t.jsx)(n.TableHeader,{className:"bg-gray-900",children:(0,t.jsxs)(n.TableRow,{className:"border-gray-700 hover:bg-gray-900",children:[(0,t.jsx)(n.TableHead,{className:"text-gray-400 font-medium",children:"Name"}),(0,t.jsx)(n.TableHead,{className:"text-gray-400 font-medium",children:"Status"}),(0,t.jsx)(n.TableHead,{className:"text-gray-400 font-medium",children:"CPU"}),(0,t.jsx)(n.TableHead,{className:"text-gray-400 font-medium",children:"Memory"}),(0,t.jsx)(n.TableHead,{className:"text-gray-400 font-medium",children:"Disk"}),(0,t.jsx)(n.TableHead,{className:"text-gray-400 font-medium text-right",children:"Actions"})]})}),(0,t.jsx)(n.TableBody,{className:"divide-y divide-gray-700",children:e.map(e=>(0,t.jsxs)(n.TableRow,{className:"border-gray-700 hover:bg-gray-800/50 cursor-pointer",children:[(0,t.jsxs)(n.TableCell,{children:[(0,t.jsx)(r.default,{href:`/vms/detail?id=${e.id}`,className:"font-medium text-gray-100 hover:text-blue-400",children:e.name}),e.description&&(0,t.jsx)("p",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.description})]}),(0,t.jsx)(n.TableCell,{children:(0,t.jsx)(o,{status:e.status})}),(0,t.jsxs)(n.TableCell,{className:"text-gray-300",children:[e.cpu," / ",e.maxCpu," cores"]}),(0,t.jsxs)(n.TableCell,{className:"text-gray-300",children:[e.memory," GB"]}),(0,t.jsxs)(n.TableCell,{className:"text-gray-300",children:[e.disk," GB"]}),(0,t.jsx)(n.TableCell,{className:"text-right",children:(0,t.jsx)(N,{vm:e,onActionComplete:i})})]},e.id))})]})}e.s(["VMActions",()=>N],19343),e.s(["VMTable",()=>j],47473);var w=e.i(62190);let C=(0,u.default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var S=e.i(6378),R=e.i(49658),k=e.i(65496),M=e.i(91574),E=e.i(43737),O=e.i(91644);function P({open:e,onOpenChange:r,onCreated:n}){let[s,a]=(0,l.useState)(!1),[i,o]=(0,l.useState)("image"),[u,c]=(0,l.useState)({name:"",description:"",templateName:"ubuntu-22.04",imageId:"",cpu:"2",memory:"4",disk:"50"}),{currentOrg:d}=(0,O.useOrganization)(),{data:p}=(0,E.useProjectsForOrganization)(d?.id),f=p?.[0]?.id,{data:m,isLoading:h}=(0,M.useImages)(f),v=(0,l.useMemo)(()=>m?.filter(e=>"ready"===e.status&&e.id)||[],[m]),N=(0,l.useCallback)(e=>{let t=v.find(t=>t.id===e);t?c(r=>({...r,imageId:e,cpu:t.defaultCpu?.toString()||r.cpu,memory:t.defaultMemory?.toString()||r.memory,disk:t.defaultDisk?.toString()||r.disk})):c(t=>({...t,imageId:e}))},[v]),j=async e=>{if(e.preventDefault(),!u.name.trim())return void x.toast.error("Please enter a VM name");if("image"===i&&!u.imageId)return void x.toast.error("Please select an image");if("template"===i&&!u.templateName.trim())return void x.toast.error("Please enter a template name");a(!0);try{await b.vmsApi.create({name:u.name,description:u.description||void 0,..."image"===i?{imageId:u.imageId}:{templateName:u.templateName},cpu:parseInt(u.cpu)||2,memory:0x40000000*(parseInt(u.memory)||4),disk:0x40000000*(parseInt(u.disk)||50)}),x.toast.success(`VM "${u.name}" created successfully`),r(!1),n?.(),c({name:"",description:"",templateName:"ubuntu-22.04",imageId:"",cpu:"2",memory:"4",disk:"50"}),o("image")}catch(e){x.toast.error(e instanceof Error?e.message:"Failed to create VM")}finally{a(!1)}};return(0,t.jsx)(S.Dialog,{open:e,onOpenChange:r,children:(0,t.jsxs)(S.DialogContent,{className:"bg-gray-800 border-gray-700 text-gray-100",children:[(0,t.jsxs)(S.DialogHeader,{children:[(0,t.jsx)(S.DialogTitle,{children:"Create Virtual Machine"}),(0,t.jsx)(S.DialogDescription,{className:"text-gray-400",children:"Configure your new virtual machine"})]}),(0,t.jsxs)("form",{onSubmit:j,children:[(0,t.jsxs)("div",{className:"space-y-4 py-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(k.Label,{htmlFor:"name",className:"text-gray-200",children:"VM Name"}),(0,t.jsx)(R.Input,{id:"name",placeholder:"my-vm",value:u.name,onChange:e=>c({...u,name:e.target.value}),className:"bg-gray-900 border-gray-700 text-gray-100",disabled:s})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(k.Label,{htmlFor:"description",className:"text-gray-200",children:"Description"}),(0,t.jsx)(R.Input,{id:"description",placeholder:"Production web server",value:u.description,onChange:e=>c({...u,description:e.target.value}),className:"bg-gray-900 border-gray-700 text-gray-100",disabled:s})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(k.Label,{className:"text-gray-200",children:"Disk Source"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(y.Button,{type:"button",variant:"image"===i?"default":"outline",size:"sm",onClick:()=>o("image"),className:"image"===i?"bg-blue-600 hover:bg-blue-700":"border-gray-600 text-gray-300 hover:bg-gray-700",disabled:s,children:[(0,t.jsx)(w.HardDrive,{className:"h-4 w-4 mr-2"}),"Image"]}),(0,t.jsxs)(y.Button,{type:"button",variant:"template"===i?"default":"outline",size:"sm",onClick:()=>o("template"),className:"template"===i?"bg-blue-600 hover:bg-blue-700":"border-gray-600 text-gray-300 hover:bg-gray-700",disabled:s,children:[(0,t.jsx)(C,{className:"h-4 w-4 mr-2"}),"Template"]})]})]}),"image"===i?(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(k.Label,{htmlFor:"image",className:"text-gray-200",children:"Disk Image"}),f?h?(0,t.jsxs)("div",{className:"flex items-center gap-2 text-gray-400 text-sm",children:[(0,t.jsx)(g.Loader2,{className:"h-4 w-4 animate-spin"}),"Loading images..."]}):0===v.length?(0,t.jsxs)("div",{className:"text-sm text-gray-400 py-2",children:["No images available."," ",(0,t.jsx)("a",{href:"/images",className:"text-blue-400 hover:underline",children:"Upload an image"})," ","first."]}):(0,t.jsxs)("select",{value:u.imageId,onChange:e=>N(e.target.value),disabled:s,className:"w-full h-9 px-3 py-2 bg-gray-900 border border-gray-700 text-gray-100 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed",children:[(0,t.jsx)("option",{value:"",disabled:!0,children:"Select an image"}),v.map(e=>(0,t.jsxs)("option",{value:e.id,children:[e.name," (",e.sizeFormatted,")"]},e.id))]}):(0,t.jsx)("div",{className:"text-sm text-gray-400 py-2",children:"No project available. Create a project first to upload images."})]}):(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(k.Label,{htmlFor:"template",className:"text-gray-200",children:"OS Template (Legacy)"}),(0,t.jsx)(R.Input,{id:"template",placeholder:"ubuntu-22.04",value:u.templateName,onChange:e=>c({...u,templateName:e.target.value}),className:"bg-gray-900 border-gray-700 text-gray-100",disabled:s}),(0,t.jsx)("p",{className:"text-xs text-yellow-500",children:"Templates are deprecated. Consider uploading an image instead."})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(k.Label,{htmlFor:"cpu",className:"text-gray-200",children:"CPU Cores"}),(0,t.jsx)(R.Input,{id:"cpu",type:"number",min:"1",value:u.cpu,onChange:e=>c({...u,cpu:e.target.value}),className:"bg-gray-900 border-gray-700 text-gray-100",disabled:s})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(k.Label,{htmlFor:"memory",className:"text-gray-200",children:"Memory (GB)"}),(0,t.jsx)(R.Input,{id:"memory",type:"number",min:"1",value:u.memory,onChange:e=>c({...u,memory:e.target.value}),className:"bg-gray-900 border-gray-700 text-gray-100",disabled:s})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(k.Label,{htmlFor:"disk",className:"text-gray-200",children:"Disk (GB)"}),(0,t.jsx)(R.Input,{id:"disk",type:"number",min:"10",value:u.disk,onChange:e=>c({...u,disk:e.target.value}),className:"bg-gray-900 border-gray-700 text-gray-100",disabled:s})]})]})]}),(0,t.jsxs)(S.DialogFooter,{children:[(0,t.jsx)(y.Button,{type:"button",variant:"outline",onClick:()=>r(!1),className:"border-gray-600 text-gray-300 hover:bg-gray-700",disabled:s,children:"Cancel"}),(0,t.jsx)(y.Button,{type:"submit",className:"bg-blue-600 hover:bg-blue-700",disabled:s,children:s?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.Loader2,{className:"h-4 w-4 mr-2 animate-spin"}),"Creating..."]}):"Create VM"})]})]})]})})}e.s(["CreateVMDialog",()=>P],91549),e.s([],18625)}]);